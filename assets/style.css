
:root{
    /* semantic surfaces */
    --sa-bg:        #f7f8fb;
    --sa-card:      #ffffff;
    --sa-card-2:    color-mix(in srgb, var(--sa-card) 92%, #fff);
    --sa-border:    #e9edf3;
    --sa-ink:       #0b1220;
    --sa-muted:     #687385;

    --sa-brand-50:  #eef2ff;
    --sa-brand-100: #e0e7ff;
    --sa-brand-200: #c7d2fe;
    --sa-brand-300: #a5b4fc;
    --sa-brand-400: #818cf8;
    --sa-brand-500: #6366f1;
    --sa-brand-600: #5458d9;
    --sa-accent:    #22c55e;

    /* state colors */
    --sa-info:   #3b82f6;
    --sa-warn:   #f59e0b;
    --sa-danger: #ef4444;

    /* effects */
    --sa-radius: 14px;
    --sa-shadow-sm: 0 6px 18px rgba(12,16,26,.07);
    --sa-shadow:    0 14px 34px rgba(12,16,26,.10);

    /* motion */
    --sa-time-1: .14s;
    --sa-time-2: .24s;
    --sa-time-3: .38s;
    --sa-ease: cubic-bezier(.2,.55,.18,.99);

    color-scheme: light dark;
}

html[data-theme="dark"]{
    --sa-bg:#0a0f15;
    --sa-card:#0f141b;
    --sa-card-2:#0c1117;
    --sa-border:#1f2a37;
    --sa-ink:#e6e9ee;
    --sa-muted:#94a0ae;

    --sa-brand-50:#0e1322;
    --sa-brand-100:#151b2d;
    --sa-brand-200:#1e2640;
    --sa-brand-300:#293259;
    --sa-brand-400:#34407a;
    --sa-brand-500:#5164ff;
    --sa-brand-600:#7ea2ff;

    --sa-shadow-sm: 0 6px 18px rgba(0,0,0,.35);
    --sa-shadow:    0 18px 42px rgba(0,0,0,.48);
}

body{ background:var(--sa-bg); color:var(--sa-ink); }

.card{
    background:var(--sa-card);
    border:1px solid var(--sa-border);
    border-radius:var(--sa-radius);
    box-shadow:var(--sa-shadow-sm);
    transition:
            transform var(--sa-time-2) var(--sa-ease),
            box-shadow var(--sa-time-2) var(--sa-ease),
            border-color var(--sa-time-2) var(--sa-ease);
}
.card-hover:hover{
    transform:translateY(-2px);
    box-shadow:var(--sa-shadow);
    border-color:color-mix(in srgb, var(--sa-brand-500) 24%, var(--sa-border));
}

.btn-primary{
    --bs-btn-bg: var(--sa-brand-500);
    --bs-btn-border-color: var(--sa-brand-500);
    --bs-btn-hover-bg: var(--sa-brand-600);
    --bs-btn-hover-border-color: var(--sa-brand-600);
    --bs-btn-active-bg: var(--sa-brand-600);
}
.btn-outline-primary{
    --bs-btn-color: var(--sa-brand-500);
    --bs-btn-border-color: color-mix(in srgb, var(--sa-brand-500) 55%, var(--sa-border));
    --bs-btn-hover-bg: color-mix(in srgb, var(--sa-brand-500) 10%, transparent);
    --bs-btn-hover-border-color: var(--sa-brand-500);
}

/* аккуратные чипы и бейджи */
.chip{
    background:linear-gradient(180deg,var(--sa-card-2) 0%,var(--sa-card) 100%);
    border:1px solid var(--sa-border);
}
.badge-soft{
    background:color-mix(in srgb, var(--sa-brand-500) 18%, transparent);
    color:var(--sa-brand-600);
    border:1px solid color-mix(in srgb, var(--sa-brand-500) 36%, transparent);
}
.badge-muted{
    background:color-mix(in srgb, var(--sa-muted) 14%, transparent);
    color:var(--sa-muted);
    border:1px solid color-mix(in srgb, var(--sa-muted) 28%, transparent);
}

/* «живая» брендовая подпись в navbar при ховере */
.navbar-brand{
    background: linear-gradient(90deg, var(--sa-brand-500), var(--sa-brand-600));
    -webkit-background-clip:text; background-clip:text; color:transparent;
}
.navbar-brand:hover{ filter:saturate(1.2) brightness(1.02); }


@keyframes sa-fade-up   { from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none} }
@keyframes sa-scale-in  { from{opacity:.8; transform:scale(.98)} to{opacity:1; transform:scale(1)} }
@keyframes sa-drop      { from{opacity:0; transform:translateY(-8px)} to{opacity:1; transform:none} }

/* утилиты анимаций */
.sa-entrance{ animation: sa-fade-up var(--sa-time-3) var(--sa-ease); }
.sa-scalein{  animation: sa-scale-in var(--sa-time-2) var(--sa-ease); }
.dropdown-menu{ transform-origin: top right; animation: sa-drop var(--sa-time-2) var(--sa-ease); }

/* нажатия и ховеры */
.btn, .chip, .list-group-item, .file-chip{
    transition:
            transform var(--sa-time-1) var(--sa-ease),
            box-shadow var(--sa-time-2) var(--sa-ease),
            background-color var(--sa-time-2) var(--sa-ease);
}
.btn:active{ transform: translateY(1px) scale(.99); }
.table tbody tr:hover{ background: color-mix(in srgb, var(--sa-brand-500) 6%, transparent); }

/* липкая шапка, мягкое сжатие при скролле */
.navbar.bg-body{
    backdrop-filter: blur(8px);
    transition: box-shadow var(--sa-time-2), padding var(--sa-time-2);
}
.navbar.nav-scrolled{
    box-shadow:0 8px 22px rgba(13,18,28,.08);
    padding-block: .35rem !important;
}

@media (prefers-reduced-motion: reduce){
    * { animation-duration:.001ms !important; animation-iteration-count:1 !important; transition:none !important; }
}

/* до 576px таблицы становятся карточками */
@media (max-width: 575.98px){
    .table.responsive-cards thead{ display:none; }
    .table.responsive-cards tbody,
    .table.responsive-cards tr,
    .table.responsive-cards td{ display:block; width:100%; }
    .table.responsive-cards tr{
        border:1px solid var(--sa-border);
        border-radius:12px;
        background:var(--sa-card);
        box-shadow:var(--sa-shadow-sm);
        margin-bottom:.75rem; padding:.4rem .6rem;
    }
    .table.responsive-cards td{ border:none; padding:.2rem 0; }
    .table.responsive-cards td::before{
        content: attr(data-th) ": ";
        font-weight:600; color:var(--sa-muted);
        min-width:7rem; display:inline-block;
    }
    .table.responsive-cards .text-end{ text-align:left !important; }
}

/* удобные фокусы */
:where(a,button,.form-control,.form-select):focus{
    box-shadow:0 0 0 .2rem color-mix(in srgb, var(--sa-brand-500) 28%, transparent) !important;
    border-color: color-mix(in srgb, var(--sa-brand-500) 55%, var(--sa-border)) !important;
}

/* скроллбары */
*{ scrollbar-width: thin; scrollbar-color: color-mix(in srgb, var(--sa-muted) 35%, transparent) transparent; }
*::-webkit-scrollbar{ height:10px; width:10px; }
*::-webkit-scrollbar-thumb{
    background: color-mix(in srgb, var(--sa-muted) 35%, transparent);
    border-radius: 999px;
}

/* file-chip визуал */
.file-chip{
    background:linear-gradient(180deg,var(--sa-card-2) 0%,var(--sa-card) 100%);
    border:1px solid var(--sa-border);
}
.file-chip .dot{ width:.5rem; height:.5rem; border-radius:999px; background:#94a3b8; }
.file-chip[data-ext="apk"] .dot{ background:#10b981; }
.file-chip[data-ext="zip"] .dot{ background:#6366f1; }
.file-chip[data-ext="jar"] .dot{ background:#f59e0b; }
.file-chip[data-ext="pdf"] .dot{ background:#ef4444; }
.file-chip:hover{ transform:translateY(-1px); box-shadow:var(--sa-shadow-sm); }

/* пустые состояния */
.empty{
    display:grid; place-items:center; padding:2.2rem;
    color:var(--sa-muted);
    border:1px dashed var(--sa-border);
    border-radius:var(--sa-radius);
    background:linear-gradient(180deg,var(--sa-card) 0%, var(--sa-card-2) 100%);
}

/* верхняя полоса прогресса */
#sa-nprog{
    position:fixed; left:0; top:0; height:3px; width:0%;
    background: linear-gradient(90deg, var(--sa-brand-500), var(--sa-brand-600));
    box-shadow: 0 0 12px color-mix(in srgb, var(--sa-brand-500) 45%, transparent);
    transition: width var(--sa-time-2) var(--sa-ease), opacity .3s;
    z-index: 3000; opacity:0;
    pointer-events: none;   /* не мешает кликам */
    will-change: width;     /* оптимизация анимации */
}
#sa-nprog.active{ opacity:1; }

.prose{ line-height:1.7; color:var(--sa-ink); }
html[data-theme="dark"] .prose{ color:var(--sa-ink); }

.prose img,
.prose video{
    max-width:100% !important;
    height:auto !important;
    display:block;
    border-radius:10px;
    box-shadow:var(--sa-shadow-sm);
    margin:.6rem 0;
}

.prose iframe{
    width:100%;
    max-width:100%;
    border:0;
    margin:.6rem 0;
}


.prose table{ width:100%; border-collapse:collapse; }
.prose pre{
    background:#0b1020; color:#e2e8f0;
    padding:.9rem; border-radius:10px;
    overflow:auto;
    box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}
.prose code:not(pre code){
    background: color-mix(in srgb, var(--sa-ink) 6%, transparent);
    padding:.1rem .35rem; border-radius:4px;
}
